cd $GOPATH/src/stream-music-2/basic-network

./bin/cryptogen generate --config=./crypto-config.yaml

mkdir config

./bin/configtxgen -profile OrdererGenesis -outputBlock ./config/genesis.block

./bin/configtxgen -profile Channel1 -outputCreateChannelTx ./config/channel1.tx-channelID

./bin/configtxgen -profile Channel2 -outputCreateChannelTx ./config/channel2.tx-channelID

./bin/configtxgen -profile Channel1 -outputAnchorPeersUpdate ./config/Sales1Organchors.tx -channelID channelsales1 -asOrg Sales1Org

./bin/configtxgen -profile Channel2 -outputAnchorPeersUpdate ./config/Sales2Organchors.tx -channelID channelsales2 -asOrg Sales2Org

./bin/configtxgen -profile Channel1 -outputAnchorPeersUpdate ./config/CustomerOrganchorsChannel1.tx -channelID channelsales1 -asOrg CustomerOrg

./bin/configtxgen -profile Channel2 -outputAnchorPeersUpdate ./config/CustomerOrganchorsChannel2.tx -channelID channelsales2 -asOrg CustomerOrg


docker-compose up -d

###################################################################################################
[터미널1] sales1 조직의 peer0 노드의 CLI인 cli1에 접속
docker exec -it cli1 bash

peer channel create -o orderer1.acornpub.com:7050 -c channelsales1 -f /etc/hyperledger/configtx/channel1.tx

peer channel join -b channelsales1.block

peer channel update -o orderer1.acornpub.com:7050 -c channelsales1 -f /etc/hyperledger/configtx/Sales1Organchors.tx

export CORE_PEER_ADDRESS=peer1.sales1.acornpub.com:7051
peer channel join -b channelsales1.block

//
export CORE_PEER_ADDRESS=peer0.customer.acornpub.com:7051

export CORE_PEER_MSPCONFIGPATH=/opt/gopath/src/github.com/hyperledger/fabric/peer/crypto/peerOrganizations/customer.acornpub.com/users/Admin@customer.acornpub.com/msp

CORE_PEER_LOCALMSPID=CustomerOrg

peer channel join -b channelsales1.block
//

peer channel update -o orderer1.acornpub.com:7050 -c channelsales1 -f /etc/hyperledger/configtx/CustomerOrganchorsChannel1.tx

export CORE_PEER_ADDRESS=peer1.customer.acornpub.com:7051
peer channel join -b channelsales1.block
###################################################################################################
[터미널2] peer0.sales2.acornpub.com CLI인 cli2에 접속
docker exec -it cli2 bash

peer channel create -o orderer1.acornpub.com:7050 -c channelsales2 -f /etc/hyperledger/configtx/channel2.tx

peer channel join -b channelsales2.block

peer channel update -o orderer1.acornpub.com:7050 -c channelsales2 -f /etc/hyperledger/configtx/Sales2Organchors.tx

export CORE_PEER_ADDRESS=peer1.sales2.acornpub.com:7051
peer channel join -b channelsales2.block

//
export CORE_PEER_ADDRESS=peer1.customer.acornpub.com:7051

export CORE_PEER_MSPCONFIGPATH=/opt/gopath/src/github.com/hyperledger/fabric/peer/crypto/peerOrganizations/customer.acornpub.com/users/Admin@customer.acornpub.com/msp

CORE_PEER_LOCALMSPID=CustomerOrg

peer channel join -b channelsales2.block
//

peer channel update -o orderer1.acornpub.com:7050 -c channelsales2 -f /etc/hyperledger/configtx/CustomerOrganchorsChannel2.tx

export CORE_PEER_ADDRESS=peer1.customer.acornpub.com:7051
peer channel join -b channelsales2.block





